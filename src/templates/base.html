<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Personal Assistant{% endblock %}</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.jade.min.css"
    />
    <style>
      header {
        position: sticky;
        top: 0;
        z-index: 1000;
        background: rgba(var(--pico-background-color-rgb), 0.9);
        border-bottom: 1px solid var(--pico-header-border-color);
        box-shadow: var(--pico-card-box-shadow);
        backdrop-filter: blur(15px);
      }
      header .container {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .header-title {
        text-decoration: none;
      }
      .header-title h1 {
        margin: 0;
      }

      aside {
        position: sticky;
        top: 7rem;
        align-self: start;
        background: rgba(var(--pico-background-color-rgb), 0.9);
        backdrop-filter: blur(5px);
        border-right: 1px solid var(--pico-header-border-color);
        padding: 1rem;
        height: calc(100vh - 4rem);
        overflow-y: auto;
      }

      main {
        display: grid;
        grid-template-rows: auto 1fr;
        grid-template-columns: 10.5rem 1fr 10.5rem;
        grid-template-areas:
          "menu header table-of-content"
          "menu body table-of-content";
      }

      .auth_btn {
        margin: 0;
        padding: 5px 10px 5px 10px;
        display: flex;
        align-self: center;
      }

      .add_note_btn {
        display: flex;
        justify-self: center;
      }

      .note_btn_container {
        display: flex;
        justify-self: center;
        margin: 28px;
      }

      .contact-search {
        margin-bottom: 42px;
      }

      ul,
      ol {
        list-style: none; /* Remove list styling */
        padding-left: 0; /* Remove default padding */
      }

      ul li,
      ol li {
        list-style: none; /* Ensure list items have no styling */
      }
    </style>
  </head>
  <body style="min-height: 1071px">
    <header class="is-fixed-above-lg is-fixed">
      <div class="container">
        <a class="header-title" href="/"><h1>Personal Assistant</h1></a>
        <nav>
          <ul>
            {% if user.is_authenticated %}
            <li>
              <form method="post" action="{% url 'users:logout' %}">
                {% csrf_token %}
                <button type="submit" class="auth_btn contrast">Logout</button>
              </form>
            </li>
            {% else %}
            <li>
              <a class="contrast" href="{% url 'users:login_page' %}">Login</a>
            </li>
            <li>
              <a class="contrast" href="{% url 'users:register_page' %}"
                >Register</a
              >
            </li>
            {% endif %}
            <li>
              <button class="outline contrast" onclick="toggleTheme()">
                <div style="width: 24px; height: 24px">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="lucide lucide-lamp-desk"
                  >
                    <path d="m14 5-3 3 2 7 8-8-7-2Z"></path>
                    <path d="m14 5-3 3-3-3 3-3 3 3Z"></path>
                    <path d="M9.5 6.5 4 12l3 6"></path>
                    <path
                      d="M3 22v-2c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v2H3Z"
                    ></path>
                  </svg>
                </div>
              </button>
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="container has-table-of-contents page-classless">
      <aside>
        <nav>
          <ul>
            {% if user.is_authenticated %}
            <li>
              <a class="secondary" href="{% url 'news:news_summary' %}">News</a>
            </li>
            <li>
              <a class="secondary" href="{% url 'notes:note-list' %}">Notes</a>
            </li>
            <li>
              <a class="secondary" href="{% url 'notes:tag-list' %}">Tags</a>
            </li>
            <li>
              <a class="secondary" href="{% url 'contacts:contact-list' %}"
                >Contacts</a
              >
            </li>
            <li>
              <a class="secondary" href="{% url 'files:file_list' %}">Files</a>
            </li>
            {% endif %}
          </ul>
        </nav>
      </aside>
      <div>
        <section>
          <p>{% block content %}{% endblock %}</p>
        </section>
      </div>
    </main>
  </body>

  <script defer>
    function toggleTheme() {
      const root = document.documentElement;
      const currentTheme = root.getAttribute("data-theme");
      const newTheme = currentTheme === "light" ? "dark" : "light";

      root.setAttribute("data-theme", newTheme);
      localStorage.setItem("theme", newTheme);
    }

    document.addEventListener("DOMContentLoaded", () => {
      const savedTheme = localStorage.getItem("theme") || "light";
      document.documentElement.setAttribute("data-theme", savedTheme);
    });
  </script>
</html>
